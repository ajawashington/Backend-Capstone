@model BackendCapstone.Models.ViewModels.Profile.UserProfileViewModel
@{
    ViewData["Title"] = "Details";
}
@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager



    <div>

        <h1 style="color:goldenrod">@Model.User.TagName</h1>
        <th>
            @Html.DisplayNameFor(model => model.User.ImagePath)
        </th>
        <td>
            <img src="~/images/@Model.User.ImagePath" , style="width: 8em; height: auto;">
        </td>
        <br />
        <td>
            <a href='@Url.Action("Search","Home")?searchBar=@Model.User.Location'>@Model.User.Location</a>
        </td>


    </div>

<div>

    <br>

@if (UserManager.GetUserAsync(User).Result.Id == Model.AppUserId)
{


    <a asp-controller="Profile" asp-action="Details" asp-route-id="@Model.AppUserId">
        @Html.ActionLink("Edit Profile Information", // <-- Link text
          "Edit", // <-- Action Method Name
          "Profile", // <-- Controller Name
          new { Id = Model.AppUserId }, // <-- Route value
          null // <-- htmlArguments
          )
    </a>
}
else
{
    <form asp-controller="Trades" asp-action="Create">
        <input type="submit" value="Make Barter Request" class="btn btn-danger" />
    </form>

}
</div>

<table class="table">

    <tr>
        <th class="col-sm-2">
            @Html.DisplayNameFor(model => model.BarterItems)
        </th>
    </tr>
    @foreach (var item in Model.BarterItems)
    {
        <tbody>
            <tr>
                @if (item.ImagePath == null)
                {
                    <th>
                        @Html.DisplayNameFor(model => item.ImagePath)
                    </th>
                    <td>
                        <a asp-controller="BarterItems" asp-action="Details" asp-route-id="@item.BarterItemId">
                            @Html.ActionLink(item.Title, // <-- Link text
                            "Details", // <-- Action Method Name
                            "BarterItems", // <-- Controller Name
                            new { Id = item.BarterItemId }, // <-- Route value
                            null // <-- htmlArguments
                            )
                        </a>
                    </td>
                }
                else
                {


                    <td>
                        <a href="@Url.Action("Details", "BarterItems",  new { Id = item.BarterItemId })">
                            <img src="~/images/@item.ImagePath" , style="width: 4em; height: auto;">
                        </a>

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Title)
                    </td>
                }

            </tr>
        </tbody>
    }

</table>


